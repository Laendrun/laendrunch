# Official repo of my personnal website

I'm trying new things with frontend / backend websites.

There's another repo with my first try at a backend API but I want to make it more clear and have the frontend in the same repo.

You can find the old repo [there](https://github.com/Laendrun/laendrun_api)

## Installed modules 

- [x] Express
- [x] mysql
- [x] axios
- [x] bcrypt
- [x] jsonwebtoken
- [x] cors
- [x] @hapi/joi
- [x] vue-cli
- [x] @fortawesome/fontawesome-free
- [x] dotenv

## Version history

- v1.0.0
    - First backend done
        - email routes
            - POST /email/save
            - POST /email/send
        - auth routes
            - POST /auth/signup
            - POST /auth/login
    - First frontend
        - Homepage
            - Content written on page
            - Contact form on the page
            - Sending messasge with the contact form send me an email
                - Contact form sending email with the [POST /email/send] route
- v1.1.0
    - Backend
        - No change
    - Frontend
        - Added a login page on my site
            - There's no link to this page on the site so that only people who know it exists can access it
            - Token generated by the server is save in the localstorage of the browser
- v1.2.0
    - Backend
        - PATCH /user/password route
            - Allows the connected user's password to be changed
        - PATCH /user/email route
            - Allows the connected user's email to be changed
        - PATCH /user/username route
            - Allow the connected user's username to be changed
        - GET /user
            - Returns an array of all users and all of their informations in the database
    - Frontend
        - No change
- v1.2.1
    - Backend
        - GET /user
            - Passwords are no longer returned by the API
    - Frontend
        - No change
- v1.3.0
    - Backend
        - GET /email
            - Returns an array of all emails saved in the database and all of the linked informations
    - Frontend
        - No change
- v1.3.1
    - Backend
        - No change
    - Frontend 
        - Fixed Issue #14
            - Typo in the homepage 
        - Footer added to the homepage
- v1.4.0
    - Backend
        - Added a isAdmin middleware
    - Frontend
        - No change
- v1.5.0
    - Backend
        - Added route /special for contact form
    - Frontend
        - All routes related to login and dashboard are removed from now, I'll add them back later when it's correctly working. The following changes (renaming, creation, etc) have been done but not implemented.
        - Renamed /login to /adminlogin
            - /adminlogin will be used by me to connect
        - Renamed /dashboard to /admin
            - /admin will be my admin dashboard
        - Created /login for user login
            - /login will be used by users to connect
        - Created /dashboard
            - /dashboard will be the user's dashboard
        - Added a _Not found_ hanlder
            - Redirects user to / when the page they're trying to access doesn't exist
        - Added a basic user list in the admin dashboard page
        - Sending message fetch on a new route
- v1.6.0
    - Backend
        - role_id is returned alongside the token at login to be used on the frontend.
        - Added a isAdmin controller (Issue #22).
    - Frontend
        - Created a new component to be used in the admin dashboard
            - AccordionUserItem for the users Accordion
        - Installed bootstrap, jquery and popper.js on the client side
            - I just added the bootswatch library at first so the JS components from bootstrap didn't work.
- v1.7.0
    - Backend
        - Get /email modified
            - You can now make specific request on this endpoint
                - GET /email -> returns all saved emails
                - GET /email?to=```email``` -> returns all saved emails sent to ```email```
                - GET /email?from=```email``` -> returns all saved emails sent from ```email```
                - GET /email?from=```from_email```&to=```to_email``` -> returns all saved emails sent from ```from_email``` to ```to_email```
        - POST /email/send modified
            - When using /email/send it now saves the sent email to the database too
            - Requesting this endpoint now responds according to the documentation
                - Responds with the sent email
        - GET /user modified
            - This route now orders the users by role_id DESC which makes the admins appear before the "simple" users in the list for the admin
        - **New** POST /user/create route
            - This route let's admins create new users, they can send the role_id when creating the user or not. role_id defaults to user.
v1.8.0
    - Backend
        - Added email schema validation for POST /email/send
        - Added a new middleware ```setUserType``` which sets ```req.user.type``` to either **admin** or **user**
        - I can use this middleware in the routes like GET /user
            - If ```req.user.type``` is **user** -> only return information on the specific user which makes the request
            - If ```req.user.type``` is **admin** -> return an array of all users
        - Modified GET /user route to use the new ```setUserType``` middleware
            - When requesting this endpoint, the server checks the user type, and responds like describe before
    - Frontend
        - Added a new component EmailCard to easily generate card to display messages (emails) saved in the database.
        - Used the new component in the admin dashboard page to display messages saved in the database.
        - Replaced the Navbar Brand link ```<a>``` tag to a ```<router-link>``` pointing to ```/```. Now clicking the brand name in the top left redirects you to the homepage.
        - Added a new tab on the admin dashboard which is a *logout* button
        - Started working on the user's dashboard with a simple profile tab
            - Profile tab that let's you modify your informations :
                - [x] Email address
                - [x] Username
                - [x] Password
- v1.9.0
    - Backend
        - Added GET /user/?id=```id``` route
            - This route let's admin request informations on a specific user by ID.
        - Added DELETE /user/?id=```id``` route
            - Route to delete user with the specified id
    - Frontend
        - Added a tab in the admin dashboard to create new user
        - Added a button to delete a user on the admin dashboard
        - By default, the admin dashboard shows only messages sent to contact@laendrun.ch
            - There's a toggle switch to show all the messages
    - Documentation
        - Update Backend API Doc